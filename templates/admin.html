<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† - Ù†Ø§Ø¯ÙŠ Ù…Ø¯ÙŠØ³ÙŠØ³Ø©</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo&display=swap');

body {
    font-family:'Cairo',sans-serif;
    background:#fff8f0;
    color:#330000;
    margin:0;
    padding:0;
}

header {
    background:#8B0000;
    color:gold;
    padding:15px;
    text-align:center;
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:10px;
}

button {
    background:gold;
    border:none;
    padding:5px 10px;
    border-radius:5px;
    cursor:pointer;
    margin:3px;
    font-weight:bold;
}

.add-btn {
    background:#008000;
    color:white;
}

.minus-btn{
    background:#b00000;
    color:white;
}

table {
    width:95%;
    margin:20px auto;
    border-collapse:collapse;
}

th, td {
    border:1px solid gold;
    padding:8px;
    text-align:center;
    vertical-align:middle;
}

th {
    background:#8B0000;
    color:gold;
}

img {
    max-width:80px;
    height:auto;
    border-radius:5px;
}

h2 {
    text-align:center;
    margin-top:40px;
}

input[type="number"]{
    width:70px;
    padding:5px;
    border-radius:5px;
    border:1px solid #aaa;
    text-align:center;
}

@media(max-width:600px) {
    table, th, td {
        font-size:12px;
    }
}
</style>
</head>

<body>

<header>
    <h1>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</h1>
    <a href="{{ url_for('index') }}"><button>Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button></a>
    <a href="{{ url_for('logout_admin') }}"><button>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button></a>
</header>

<!-- ================= Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ================= -->
<h2>
Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
<a href="{{ url_for('register') }}">
<button class="add-btn">Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</button>
</a>
</h2>

<table>
<tr>
<th>Ø§Ù„Ø§Ø³Ù…</th>
<th>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
<th>Ø§Ù„Ù‡Ø§ØªÙ</th>
<th>Ø§Ù„Ø¯ÙˆØ±</th>
<th>Ø§Ù„ØµÙˆØ±Ø©</th>
<th>Ø±ØµÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„Ø§Øª</th>
<th>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±ØµÙŠØ¯</th>
<th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
</tr>

{% for u in users %}
<tr>
<td>{{ u.full_name or '-' }}</td>
<td>{{ u.username }}</td>
<td>{{ u.phone or '-' }}</td>
<td>{{ u.role or '-' }}</td>
<td>
<img src="{{ u.photo_url if u.photo_url else url_for('static', filename='images/default_user.png') }}">
</td>

<!-- Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
<td>
<strong>{{ u.balance if u.balance is not none else 0 }}</strong> ğŸ’°
</td>

<!-- Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø±ØµÙŠØ¯ -->
<td>
<form action="{{ url_for('update_balance', username=u.username) }}" method="post" style="display:flex;justify-content:center;gap:5px;flex-wrap:wrap;">
    <input type="number" name="amount" min="1" placeholder="Ø¹Ù…Ù„Ø§Øª">
    <button name="action" value="add" class="add-btn">â• Ø¥Ø¶Ø§ÙØ©</button>
    <button name="action" value="minus" class="minus-btn">â– Ø®ØµÙ…</button>
</form>
</td>

<td>
<a href="{{ url_for('edit_user', username=u.username) }}"><button>ØªØ¹Ø¯ÙŠÙ„</button></a>
<a href="{{ url_for('delete_user', username=u.username) }}" onclick="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ')">
<button>Ø­Ø°Ù</button>
</a>
</td>
</tr>
{% endfor %}
</table>

<!-- ================= Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ================= -->
<h2>
Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
<a href="{{ url_for('add_player') }}">
<button class="add-btn">Ø¥Ø¶Ø§ÙØ© Ù„Ø§Ø¹Ø¨ Ø¬Ø¯ÙŠØ¯</button>
</a>
</h2>

<table>
<tr>
<th>Ø§Ù„Ø§Ø³Ù…</th>
<th>Ø§Ù„Ù…Ø±ÙƒØ²</th>
<th>Ø§Ù„ØµÙˆØ±Ø©</th>
<th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
</tr>

{% for p in players %}
<tr>
<td>{{ p.name or '-' }}</td>
<td>{{ p.position or '-' }}</td>
<td>
<img src="{{ p.photo_url if p.photo_url else url_for('static', filename='images/default_player.png') }}">
</td>
<td>
{% if p._id %}
<a href="{{ url_for('edit_player', player_id=p._id|string) }}"><button>ØªØ¹Ø¯ÙŠÙ„</button></a>
<a href="{{ url_for('delete_player', player_id=p._id|string) }}" onclick="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù„Ø§Ø¹Ø¨ØŸ')">
<button>Ø­Ø°Ù</button>
</a>
{% else %}
-
{% endif %}
</td>
</tr>
{% endfor %}
</table>

<!-- ================= Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ================= -->
<h2>
Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
<a href="{{ url_for('add_ad') }}">
<button class="add-btn">Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯</button>
</a>
</h2>

<table>
<tr>
<th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
<th>Ø§Ù„ØµÙˆØ±Ø©</th>
<th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
</tr>

{% for a in ads %}
<tr>
<td>{{ a.title or '-' }}</td>
<td>
<img src="{{ a.photo_url if a.photo_url else url_for('static', filename='images/default_ad.png') }}">
</td>
<td>
{% if a._id %}
<a href="{{ url_for('edit_ad', ad_id=a._id|string) }}"><button>ØªØ¹Ø¯ÙŠÙ„</button></a>
<a href="{{ url_for('delete_ad', ad_id=a._id|string) }}" onclick="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ØŸ')">
<button>Ø­Ø°Ù</button>
</a>
{% else %}
-
{% endif %}
</td>
</tr>
{% endfor %}
</table>

</body>
</html>
