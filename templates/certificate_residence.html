<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø´Ù‡Ø§Ø¯Ø© Ø³ÙƒÙ†</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;800;900&display=swap" rel="stylesheet">

<style>
*{
    filter:none !important;
    backdrop-filter:none !important;
    transform:none !important;
}

body{
    font-family:'Cairo',sans-serif;
    background:#eee;
    padding:20px;
    display:flex;
    flex-direction:column;
    align-items:center;
}

#alert-msg{
    width:1000px;
    background:#ffeb3b;
    color:#000;
    font-weight:bold;
    text-align:center;
    padding:10px;
    margin-bottom:15px;
    border-radius:8px;
}

#certificate{
    width:1000px;
    height:560px;
    position:relative;
    background:#fff;
    overflow:hidden;
}

#certificate img.bg{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    object-fit:cover;
}

/* ===== Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ===== */
.header{
    position:absolute;
    top:30px;
    width:100%;
    text-align:center;
    color:#1b7f6a;
}

.header .state{ font-size:24px; font-weight:700; }
.header .committee{ font-size:22px; margin-top:5px; }

/* ===== ØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ ÙÙ‚Ø· ===== */
.header .title{
    font-size:40px;      /* ÙƒØ§Ù† 42px */
    font-weight:900;
    margin-top:0px;      /* ÙƒØ§Ù† 10px (Ø±ÙØ¹Øª 10px Ù„Ù„Ø£Ø¹Ù„Ù‰) */
}

/* ===== Ø§Ù„Ø§Ø³Ù… ===== */
.name{
    position:absolute;
    top:175px;
    width:100%;
    text-align:center;
    font-size:36px;
    font-weight:800;
    color:#1b7f6a;
}

/* ===== Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ ===== */
.national{
    position:absolute;
    top:255px;
    width:100%;
    text-align:center;
    font-size:22px;
    font-weight:700;
    color:#1b7f6a;
    direction:ltr;
}

/* ===== Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© ===== */
.content{
    position:absolute;
    top:300px;
    width:78%;
    left:11%;
    text-align:center;
    font-size:18px;
    line-height:1.4;
    color:#000;
}

/* ===== Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ ===== */
.footer{
    position:absolute;
    bottom:50px;
    width:100%;
    height:120px;
    color:#1b7f6a;
    font-weight:700;
}

.date{
    position:absolute;
    right:200px;
    top:20px;
    font-size:18px;
}

.signature{
    position:absolute;
    right:400px;
    top:20px;
    text-align:center;
    font-size:18px;
}

.signature .line{
    width:180px;
    height:3px;
    background:#1b7f6a;
    margin:8px auto;
}

button{
    margin-top:20px;
    padding:12px 30px;
    border:none;
    border-radius:10px;
    background:#1b7f6a;
    color:#fff;
    font-size:16px;
    cursor:pointer;
}
</style>
</head>

<body>

<div id="alert-msg">
ğŸ”” ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ù„Ø§ ØªØ¹ØªÙ…Ø¯ Ø±Ø³Ù…ÙŠÙ‹Ø§ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ ØªÙˆÙ‚ÙŠØ¹ Ø±Ø¦ÙŠØ³ Ø§Ù„Ù„Ø¬Ù†Ø© ÙˆØ®ØªÙ…Ù‡Ø§.
</div>

<div id="certificate">
    <img src="/static/images/certificate_bg.jpg" class="bg">

    <div class="header">
        <div class="state">ÙˆÙ„Ø§ÙŠØ© Ù†Ù‡Ø± Ø§Ù„Ù†ÙŠÙ„</div>
        <div class="committee">Ù„Ø¬Ù†Ø© Ù‚Ø±ÙŠØ© Ù…Ø¯ÙŠØ³ÙŠØ³Ø©</div>
        <div class="title">Ø´Ù‡Ø§Ø¯Ø© Ø³ÙƒÙ†</div>
    </div>

    <div class="name">{{ user.full_name }}</div>
    <div class="national">Ø±Ù‚Ù… ÙˆØ·Ù†ÙŠ : {{ user.national_id }}</div>

    <div class="content">
        Ù†Ø´Ù‡Ø¯ Ù†Ø­Ù† Ù„Ø¬Ù†Ø© Ù‚Ø±ÙŠØ© Ù…Ø¯ÙŠØ³ÙŠØ³Ø© Ø¨Ø£Ù† Ø§Ù„Ù…Ø°ÙƒÙˆØ± Ø£Ø¹Ù„Ø§Ù‡ Ù…Ù† Ø³ÙƒØ§Ù† Ù‚Ø±ÙŠØ© Ù…Ø¯ÙŠØ³ÙŠØ³Ø©ØŒ
        ÙˆÙ…Ù‚ÙŠÙ… Ø¨Ù‡Ø§ Ø¥Ù‚Ø§Ù…Ø© Ø¯Ø§Ø¦Ù…Ø© ÙˆÙ…Ø¹Ø±ÙˆÙ Ù„Ø¯Ù‰ Ø£Ù‡Ø§Ù„ÙŠ Ø§Ù„Ù‚Ø±ÙŠØ©.
        <br>
        ÙˆÙ‚Ø¯ Ø­Ø±Ø±Øª Ù‡Ø°Ù‡ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ù‡ØŒ Ù„ØªÙ‚Ø¯ÙŠÙ…Ù‡Ø§ Ù„Ù„Ø¬Ù‡Ø© Ø§Ù„ØªÙŠ ÙŠØ·Ù„Ø¨Ù‡Ø§ØŒ
        Ø¯ÙˆÙ† Ø£Ø¯Ù†Ù‰ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø¹Ù„Ù‰ Ù„Ø¬Ù†Ø© Ø§Ù„Ù‚Ø±ÙŠØ©.
        <br>
        ÙˆØªÙØ¶Ù„ÙˆØ§ Ø¨Ù‚Ø¨ÙˆÙ„ ÙØ§Ø¦Ù‚ Ø§Ù„Ø§Ø­ØªØ±Ø§Ù… â€¦
    </div>

    <div class="footer">
        <div class="date">Ø§Ù„ØªØ§Ø±ÙŠØ® : {{ today }}</div>
        <div class="signature">
            Ø±Ø¦ÙŠØ³ Ø§Ù„Ù„Ø¬Ù†Ø©
            <div class="line"></div>
            Ø¹Ø«Ù…Ø§Ù† ÙŠÙˆØ³Ù Ø§Ù„Ø¹Ù…Ø¯Ø©
        </div>
    </div>
</div>

<button onclick="downloadPDF()">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© PDF</button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
async function downloadPDF(){
    const { jsPDF } = window.jspdf;
    const cert = document.getElementById("certificate");

    document.getElementById("alert-msg").style.display="none";

    const canvas = await html2canvas(cert,{ scale:4, useCORS:true });

    const pdf = new jsPDF({
        orientation:"landscape",
        unit:"px",
        format:[1000,560]
    });

    pdf.addImage(canvas.toDataURL("image/png"),"PNG",0,0,1000,560);
    pdf.save("Ø´Ù‡Ø§Ø¯Ø©_Ø³ÙƒÙ†_Ù…Ø¯ÙŠØ³ÙŠØ³Ø©.pdf");

    document.getElementById("alert-msg").style.display="block";
}
</script>

</body>
</html>
